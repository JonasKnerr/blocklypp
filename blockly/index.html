<!DOCTYPE html>
<html>
<body>
  <script src="blockly_uncompressed.js"></script>

  <script src="generators/javascript.js"></script>
  <script src="generators/javascript/logic.js"></script>
  <script src="generators/javascript/loops.js"></script>
  <script src="generators/javascript/math.js"></script>
  <script src="generators/javascript/text.js"></script>
  <script src="generators/javascript/lists.js"></script>
  <script src="generators/javascript/colour.js"></script>
  <script src="generators/javascript/variables.js"></script>
  <script src="generators/javascript/procedures.js"></script>
  <script src="generators/javascript/class.js"></script>

  <script src="acorn_interpreter.js"></script>
  <script src="blocks/logic.js"></script>
  <script src="blocks/loops.js"></script>
  <script src="blocks/math.js"></script>
  <script src="blocks/text.js"></script>
  <script src="blocks/lists.js"></script>
  <script src="blocks/colour.js"></script>
  <script src="blocks/variables.js"></script>
  <script src="blocks/procedures.js"></script>
  <script src="blocks/class.js"></script>
  <script src="msg/js/en.js"></script>
<h1>Building awesome blockly OOP</h1>

<div id="blocklyDiv" style="height: 700px; width: 1200px;"></div>
<xml id="toolbox" style="display: none">
  <!-- <category name="Logic" colour="210">...</category>
  <category name="Loops" colour="120">...</category>
  <category name="Math" colour="230">...</category>
  <category name="Colour" colour="20">...</category>
  <category name="Variables" colour="330" custom="VARIABLE"></category>
  <category name="Functions" colour="290" custom="PROCEDURE"></category> -->
  <category name="Klasse" colour="370" custom ="CLASS"></category>
  <category name="Logic" colour="210"><block type="controls_if"></block>
  <block type="controls_repeat_ext"></block>
  <block type="logic_compare"></block>
  <block type="math_number"></block>
  <block type="math_arithmetic"></block>
  <block type="text"></block>
  <block type="text_print"></block></category>
  <category name="Variables" colour="330" custom="VARIABLE"></category>
  <category name="Functions" colour="290" custom ="PROCEDURE"></category>
  <category name="Local Vars" colour = "310" custom ="VARIABLES_LOCAL"></category>

  <!-- <block type="controls_if"></block>
  <block type="controls_repeat_ext"></block>
  <block type="logic_compare"></block>
  <block type="math_number"></block>
  <block type="math_arithmetic"></block>
  <block type="text"></block>
  <block type="text_print"></block> -->
</xml>
<xml id = "startBlocks">
  <!-- <block type="class_class" id="NGBirxP*~|DE2H4x_Xk#" x="400" y="12">
    <field name="NAME">Klasse</field>
    <statement name="METHODS">
      <block type="class_function_return" id="aBhRg`(~fKV_`k0CE#tA">
        <mutation statements="false" />
        <field name="NAME">Funktion</field>
        <comment pinned="false" h="80" w="160">
          Describe this function...
        </comment>
        <value name="RETURN">
          <block type="text" id="Y@pe-NMD_*z_gx5!swi/">
            <field name="TEXT">Hallo</field>
          </block>
        </value>
      </block>
    </statement>
  </block>
  <block type="class_get_instance" id="W)t#=s,%g}jhypIc3#JV" x="436" y="239">
    <mutation name="Klasse" />
    <field name="INSTANCE">InstanzName</field>
  </block>
  <block type="class_instance" id="R;QT0iY^3QPp%9K@p25Z" x="467" y="299">
    <mutation name="InstanzName" class="Klasse" />
    <field name="METHODS">Funktion</field>
  </block>
  <block type="text_print" id="Q[%MwjEr/r$}M9@xdM5-" x="371" y="353">
    <value name="TEXT">
      <block type="class_instance_output" id="2x{3+]o=]vADVa:Zb14l">
        <mutation name="InstanzName" class="Klasse" />
        <field name="METHODS">Funktion</field>
      </block>
    </value>
  </block> -->
</xml>;

<script>
var workspace = Blockly.inject("blocklyDiv", { toolbox: document.getElementById("toolbox") });
Blockly.Xml.domToWorkspace(document.getElementById("startBlocks"), workspace);
</script>
<div>
  <button onclick = "run()"> Run Me</button>
  <script>
  var run = function() {
  Blockly.JavaScript.addReservedWords("code");
  var code = Blockly.JavaScript.workspaceToCode(workspace);
  console.log(code);
  try {
    eval(code);
  } catch (e) {
    alert(e);
  }
};
</script>
</div>
</body>
</html>
