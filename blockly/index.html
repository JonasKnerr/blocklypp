<!DOCTYPE html>
<html>
<body>
  <script src="blockly_uncompressed.js"></script>

  <script src="generators/javascript.js"></script>
  <script src="generators/javascript/logic.js"></script>
  <script src="generators/javascript/loops.js"></script>
  <script src="generators/javascript/math.js"></script>
  <script src="generators/javascript/text.js"></script>
  <script src="generators/javascript/lists.js"></script>
  <script src="generators/javascript/colour.js"></script>
  <script src="generators/javascript/variables.js"></script>
  <script src="generators/javascript/procedures.js"></script>
  <script src="generators/javascript/class.js"></script>

  <script src="acorn_interpreter.js"></script>
  <script src="blocks/logic.js"></script>
  <script src="blocks/loops.js"></script>
  <script src="blocks/math.js"></script>
  <script src="blocks/text.js"></script>
  <script src="blocks/lists.js"></script>
  <script src="blocks/colour.js"></script>
  <script src="blocks/variables.js"></script>
  <script src="blocks/procedures.js"></script>
  <script src="blocks/class.js"></script>
  <script src="msg/js/en.js"></script>
<h1>Building awesome blockly OOP</h1>

<div id="blocklyDiv" style="height: 700px; width: 1200px;"></div>
<xml id="toolbox" style="display: none">
  <!-- <category name="Logic" colour="210">...</category>
  <category name="Loops" colour="120">...</category>
  <category name="Math" colour="230">...</category>
  <category name="Colour" colour="20">...</category>
  <category name="Variables" colour="330" custom="VARIABLE"></category>
  <category name="Functions" colour="290" custom="PROCEDURE"></category> -->
  <category name="Klasse" colour="370" custom ="CLASS"></category>
  <category name="Logic" colour="210"><block type="controls_if"></block>
  <block type="controls_repeat_ext"></block>
  <block type="logic_compare"></block>
  <block type="math_number"></block>
  <block type="math_arithmetic"></block>
  <block type="text"></block>
  <block type="text_print"></block></category>
  <category name="Variables" colour="330" custom="VARIABLE"></category>
  <category name="Functions" colour="290" custom ="PROCEDURE"></category>

  <!-- <block type="controls_if"></block>
  <block type="controls_repeat_ext"></block>
  <block type="logic_compare"></block>
  <block type="math_number"></block>
  <block type="math_arithmetic"></block>
  <block type="text"></block>
  <block type="text_print"></block> -->
</xml>
<xml id = "startBlocks">
  <variables>
    <variable type="" id="r11e]#UzjsGaAKsgTShH">
      x
    </variable>
  </variables>
  <block type="class_class" id="F1.=*HybnO}(y;`_tjYV" x="352" y="66">
    <field name="NAME">Klasse</field>
    <statement name="CONSTRUCTOR">
      <block type="class_constructor" id="g[C#hSHZ7stiBPl)Eng_">
        <comment pinned="false" h="80" w="160">
          Describe this function...
        </comment>
      </block>
    </statement>
    <statement name="METHODS">
      <block type="class_function_noreturn" id="12xn!Gw_rkF27c~S3#j;">
        <mutation>
          <arg name="x" varid="r11e]#UzjsGaAKsgTShH" />
        </mutation>
        <field name="NAME">Funktion</field>
        <comment pinned="false" h="80" w="160">
          Describe this function...
        </comment>
      </block>
    </statement>
  </block>
  <block type="class_get_instance" id="?Jmr`w*HP.a72M/k}aE@" x="170" y="327">
    <mutation name="Klasse" />
    <field name="INSTANCE">InstanzName</field>
  </block>
  <block type="class_instance" id="H-[66cQ%EHj9FGm71h_~" x="177" y="399">
    <mutation name="InstanzName" class="Klasse" />
    <field name="METHODS">Funktion</field>
  </block>
</xml>;

<script>
var workspace = Blockly.inject("blocklyDiv", { toolbox: document.getElementById("toolbox") });
Blockly.Xml.domToWorkspace(document.getElementById("startBlocks"), workspace);
</script>
<div>
  <button onclick = "run()"> Run Me</button>
  <script>
  var run = function() {
  Blockly.JavaScript.addReservedWords("code");
  var code = Blockly.JavaScript.workspaceToCode(workspace);
  console.log(code);
  try {
    eval(code);
  } catch (e) {
    alert(e);
  }
};
</script>
</div>
</body>
</html>
