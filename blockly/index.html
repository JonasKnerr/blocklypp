<!DOCTYPE html>
<html>
<body>
  <script src="blockly_uncompressed.js"></script>

  <script src="generators/javascript.js"></script>
  <script src="generators/javascript/logic.js"></script>
  <script src="generators/javascript/loops.js"></script>
  <script src="generators/javascript/math.js"></script>
  <script src="generators/javascript/text.js"></script>
  <script src="generators/javascript/lists.js"></script>
  <script src="generators/javascript/colour.js"></script>
  <script src="generators/javascript/variables.js"></script>
  <script src="generators/javascript/procedures.js"></script>
  <script src="generators/javascript/class.js"></script>

  <script src="acorn_interpreter.js"></script>
  <script src="blocks/logic.js"></script>
  <script src="blocks/loops.js"></script>
  <script src="blocks/math.js"></script>
  <script src="blocks/text.js"></script>
  <script src="blocks/lists.js"></script>
  <script src="blocks/colour.js"></script>
  <script src="blocks/variables.js"></script>
  <script src="blocks/procedures.js"></script>
  <script src="blocks/class.js"></script>
  <script src="msg/js/en.js"></script>
<h1>Blockly OOP</h1>

<div id="blocklyDiv" style="height: 700px; width: 1200px;"></div>
<xml id="toolbox" style="display: none">
  <!-- <category name="Logic" colour="210">...</category>
  <category name="Loops" colour="120">...</category>
  <category name="Math" colour="230">...</category>
  <category name="Colour" colour="20">...</category>
  <category name="Variables" colour="330" custom="VARIABLE"></category>
  <category name="Functions" colour="290" custom="PROCEDURE"></category> -->
  <category name="Klasse" colour="370" custom ="CLASS">
      <block type = "class_function_noreturn"> </block>
      <block type = "class_function_return"> </block>
  </category>

  <category name="Logic" colour="210"><block type="controls_if"></block>
  <block type="controls_repeat_ext"></block>
  <block type="logic_compare"></block>
  <block type="math_number"></block>
  <block type="math_arithmetic"></block>
  <block type="text"></block>
  <block type="text_print"></block></category>
  <category name="Variables" colour="330" custom="VARIABLE"></category>
  <category name="Functions" colour="290" custom ="PROCEDURE"></category>
  <category name="Local Vars" colour = "310" custom ="VARIABLES_LOCAL"></category>

  <!-- <block type="controls_if"></block>
  <block type="controls_repeat_ext"></block>
  <block type="logic_compare"></block>
  <block type="math_number"></block>
  <block type="math_arithmetic"></block>
  <block type="text"></block>
  <block type="text_print"></block> -->
</xml>
<xml id = "startBlocks">
  <!-- <variables>
    <variable type="Point" id="flcjvp}rnwA[fSf3z_EQ">Punkt1</variable>
    <variable type="" id="c]SgaU23jpiW7~HaH^}q">x</variable>
    <variable type="" id="0r)MJ:v-4Mk7u+!PO}~o">y2</variable>
    <variable type="" id="+A8?Au.A~tS4|dxq5:^l">x2</variable>
    <variable type="" id="?4(~(~N2q:Q`ZTnnv7}J">q</variable>
    <variable type="" id="1w-L6A@1!Fj=eD4aD|e%">w</variable>
    <variable type="Point" id="t2FEgqRvVC?URBI=~e{5">Punkt2</variable>
    <variable type="" id="X.SaCb(B5E:{3)@H0YjD">Punkt</variable>
    <variable type="Point" id="lO)Qnz,kvwK;{uE=;%O%">Punkt3</variable>
  </variables>
  <block type="class_class" id="`_EH.a,OV}q1*[%;9Ehw" x="113" y="-187">
    <field name="NAME">Stack</field>
    <value name="attribute1">
      <block type="variables_get" id="[kTs+Y`zG#is#pD22:`*">
        <field name="VAR" id="c]SgaU23jpiW7~HaH^}q" variabletype="">x</field>
      </block>
    </value>
    <statement name="CONSTRUCTOR">
      <block type="class_constructor" id="JU{(m7fDX|B]:xJ2w!Ly">
        <comment pinned="false" h="80" w="160">Describe this function...</comment>
        <statement name="STACK">
          <block type="variables_set" id="/2f6W4fn*_NFe:p:vboS">
            <field name="VAR" id="c]SgaU23jpiW7~HaH^}q" variabletype="">x</field>
            <value name="VALUE">
              <block type="lists_create_with" id="{]SVsmgPXp{y*E]hV*]f">
                <mutation items="0"></mutation>
              </block>
            </value>
          </block>
        </statement>
      </block>
    </statement>
    <statement name="METHODS">
      <block type="class_function_return" id="d379$]=2ynIHnzByAPcW">
        <mutation statements="false"></mutation>
        <field name="NAME">Pop</field>
        <comment pinned="false" h="80" w="160">Describe this function...</comment>
        <value name="RETURN">
          <block type="lists_getIndex" id="_S9whL=oX?4Ns9Ct`:/(">
            <mutation statement="false" at="false"></mutation>
            <field name="MODE">GET_REMOVE</field>
            <field name="WHERE">LAST</field>
            <value name="VALUE">
              <block type="variables_get" id="GcSX6/P=[gz1Mml9:ZPe">
                <field name="VAR" id="c]SgaU23jpiW7~HaH^}q" variabletype="">x</field>
              </block>
            </value>
          </block>
        </value>
        <next>
          <block type="class_function_noreturn" id="SflNCn:6SZBh`rc-|*2r">
            <mutation>
              <arg name="Punkt" varid="X.SaCb(B5E:{3)@H0YjD"></arg>
            </mutation>
            <field name="NAME">Push</field>
            <comment pinned="false" h="80" w="160">Describe this function...</comment>
            <statement name="STACK">
              <block type="lists_setIndex" id="o+o`71qVW6i^_/:(vtEy">
                <mutation at="false"></mutation>
                <field name="MODE">SET</field>
                <field name="WHERE">LAST</field>
                <value name="LIST">
                  <block type="variables_get" id="sso!{?ay1(*yl*lf;}lj">
                    <field name="VAR" id="c]SgaU23jpiW7~HaH^}q" variabletype="">x</field>
                  </block>
                </value>
                <value name="TO">
                  <block type="variables_get" id="?12?[(VRn?E6cSShRr!M">
                    <field name="VAR" id="X.SaCb(B5E:{3)@H0YjD" variabletype="">Punkt</field>
                  </block>
                </value>
              </block>
            </statement>
          </block>
        </next>
      </block>
    </statement>
  </block>
  <block type="class_class" id="L_kl)YPSg@;?`AjC|]x2" x="762" y="-137">
    <field name="NAME">Point</field>
    <value name="attribute1">
      <block type="variables_get" id="P6pd|U[~uLH$s6l;kl,y">
        <field name="VAR" id="?4(~(~N2q:Q`ZTnnv7}J" variabletype="">q</field>
      </block>
    </value>
    <value name="attribute2">
      <block type="variables_get" id="+R|wuMN2yHT8^V+NrEh/">
        <field name="VAR" id="1w-L6A@1!Fj=eD4aD|e%" variabletype="">w</field>
      </block>
    </value>
    <statement name="CONSTRUCTOR">
      <block type="class_constructor" id="LF~q+$4Y6cI8+P2v~j-8">
        <mutation>
          <arg name="y2" varid="0r)MJ:v-4Mk7u+!PO}~o"></arg>
          <arg name="x2" varid="+A8?Au.A~tS4|dxq5:^l"></arg>
        </mutation>
        <comment pinned="false" h="80" w="160">Describe this function...</comment>
        <statement name="STACK">
          <block type="variables_set" id="|~l@vBZETt_o{i_vWX$+">
            <field name="VAR" id="?4(~(~N2q:Q`ZTnnv7}J" variabletype="">q</field>
            <value name="VALUE">
              <block type="variables_get" id="U5@H=0}Qrez8`NLobf}0">
                <field name="VAR" id="0r)MJ:v-4Mk7u+!PO}~o" variabletype="">y2</field>
              </block>
            </value>
            <next>
              <block type="variables_set" id="x{g4wG)7)]ZM*Tzv:Md=">
                <field name="VAR" id="?4(~(~N2q:Q`ZTnnv7}J" variabletype="">q</field>
                <value name="VALUE">
                  <block type="variables_get" id="qNjp.aP4vh.)7P]{(/j?">
                    <field name="VAR" id="+A8?Au.A~tS4|dxq5:^l" variabletype="">x2</field>
                  </block>
                </value>
              </block>
            </next>
          </block>
        </statement>
      </block>
    </statement>
  </block>
  <block type="variables_set" id="^LQexIht%}tp|twhW9*," x="112" y="163">
    <field name="VAR" id="flcjvp}rnwA[fSf3z_EQ" variabletype="Point">Punkt1</field>
    <value name="VALUE">
      <block type="class_get_instance" id="+JhwcG+/)FeTk:7}XZmH">
        <mutation name="Point"></mutation>
        <value name="ARG0">
          <block type="math_number" id="t*h+f*acn~+a34rE0gmY">
            <field name="NUM">1</field>
          </block>
        </value>
        <value name="ARG1">
          <block type="math_number" id="eG|EUzl|-L|s2ISOCe5n">
            <field name="NUM">1</field>
          </block>
        </value>
      </block>
    </value>
    <next>
      <block type="variables_set" id="ywU|#__?-$8Sfma#858i">
        <field name="VAR" id="t2FEgqRvVC?URBI=~e{5" variabletype="Point">Punkt2</field>
        <value name="VALUE">
          <block type="class_get_instance" id="C(:RkKNmz;`xFA93H!$@">
            <mutation name="Point"></mutation>
            <value name="ARG0">
              <block type="math_number" id="0qGWM(40u)vt#=mTH5u}">
                <field name="NUM">2</field>
              </block>
            </value>
            <value name="ARG1">
              <block type="math_number" id="ATIhNWt|F%~N/9:*|+W+">
                <field name="NUM">2</field>
              </block>
            </value>
          </block>
        </value>
        <next>
          <block type="variables_set" id="RjdLr{K^qGx9+q5)S@E,">
            <field name="VAR" id="lO)Qnz,kvwK;{uE=;%O%" variabletype="Point">Punkt3</field>
            <value name="VALUE">
              <block type="class_get_instance" id="Y=lWcNT2MVkT:{MN,wJy">
                <mutation name="Point"></mutation>
                <value name="ARG0">
                  <block type="math_number" id="(JXvhZo**lR)~(`8jIyi">
                    <field name="NUM">3</field>
                  </block>
                </value>
                <value name="ARG1">
                  <block type="math_number" id="0J5^F7@?e/yUg3?rqG04">
                    <field name="NUM">3</field>
                  </block>
                </value>
              </block>
            </value>
          </block>
        </next>
      </block>
    </next>
  </block> -->
</xml>

<script>
var workspace = Blockly.inject("blocklyDiv", { toolbox: document.getElementById("toolbox") });
Blockly.Xml.domToWorkspace(document.getElementById("startBlocks"), workspace);
</script>
<div>
  <button onclick = "run()"> Run Me</button>
  <script>
  var run = function() {
  Blockly.JavaScript.addReservedWords("code");
  var code = Blockly.JavaScript.workspaceToCode(workspace);
  console.log(code);
  try {
    eval(code);
  } catch (e) {
    alert(e);
  }
};
</script>
</div>
</body>
</html>
