<!DOCTYPE html>
<html>
<body>
  <script src="blockly_uncompressed.js"></script>

  <script src="generators/javascript.js"></script>
  <script src="generators/javascript/logic.js"></script>
  <script src="generators/javascript/loops.js"></script>
  <script src="generators/javascript/math.js"></script>
  <script src="generators/javascript/text.js"></script>
  <script src="generators/javascript/lists.js"></script>
  <script src="generators/javascript/colour.js"></script>
  <script src="generators/javascript/variables.js"></script>
  <script src="generators/javascript/procedures.js"></script>
  <script src="generators/javascript/class.js"></script>

  <script src="acorn_interpreter.js"></script>
  <script src="blocks/logic.js"></script>
  <script src="blocks/loops.js"></script>
  <script src="blocks/math.js"></script>
  <script src="blocks/text.js"></script>
  <script src="blocks/lists.js"></script>
  <script src="blocks/colour.js"></script>
  <script src="blocks/variables.js"></script>
  <script src="blocks/procedures.js"></script>
  <script src="blocks/class.js"></script>
  <script src="msg/js/en.js"></script>
<h1>Building awesome blockly OOP</h1>

<div id="blocklyDiv" style="height: 700px; width: 1200px;"></div>
<xml id="toolbox" style="display: none">
  <!-- <category name="Logic" colour="210">...</category>
  <category name="Loops" colour="120">...</category>
  <category name="Math" colour="230">...</category>
  <category name="Colour" colour="20">...</category>
  <category name="Variables" colour="330" custom="VARIABLE"></category>
  <category name="Functions" colour="290" custom="PROCEDURE"></category> -->
  <category name="Klasse" colour="370" custom ="CLASS"></category>
  <category name="Logic" colour="210"><block type="controls_if"></block>
  <block type="controls_repeat_ext"></block>
  <block type="logic_compare"></block>
  <block type="math_number"></block>
  <block type="math_arithmetic"></block>
  <block type="text"></block>
  <block type="text_print"></block></category>
  <category name="Variables" colour="330" custom="VARIABLE"></category>
  <category name="Functions" colour="290" custom ="PROCEDURE"></category>
  <category name="Local Vars" colour = "310" custom ="VARIABLES_LOCAL"></category>

  <!-- <block type="controls_if"></block>
  <block type="controls_repeat_ext"></block>
  <block type="logic_compare"></block>
  <block type="math_number"></block>
  <block type="math_arithmetic"></block>
  <block type="text"></block>
  <block type="text_print"></block> -->
</xml>
<xml id = "startBlocks">
  <!-- <variables>
    <variable type="" id="0B_JK#tw#??4^{?EPCg]">
      x
    </variable>
    <variable type="" id="yB|8kP1Sm{B]!Fb8~=vw">
      y
    </variable>
    <variable type="" id="VX_uNrZ+,6}^7H.KK)/|">
      z
    </variable>
  </variables>
  <block type="class_class" id="@GAsY?*]3*gc59qKB(}_" x="529" y="56">
    <field name="NAME">Klasse</field>
    <statement name="CONSTRUCTOR">
      <block type="class_constructor" id="8g_,,H(2n}=X~{d]4VnN">
        <comment pinned="false" h="80" w="160">
          Describe this function...
        </comment>
      </block>
    </statement>
    <statement name="METHODS">
      <block type="class_function_noreturn" id="(F^-HUd0@N.,4?}Cv8nI">
        <field name="NAME">Funktion</field>
        <comment pinned="false" h="80" w="160">
          Describe this function...
        </comment>
      </block>
    </statement>
  </block>
  <block type="variables_get" id="^_FQ^ZSoFm`rhGSiZR?," x="335" y="78">
    <field name="VAR" id="0B_JK#tw#??4^{?EPCg]" variabletype="">
      x
    </field>
  </block>
  <block type="variables_get" id="EWHC2)%P]npT*_T--]##" x="344" y="116">
    <field name="VAR" id="yB|8kP1Sm{B]!Fb8~=vw" variabletype="">
      y
    </field>
  </block>
  <block type="variables_get" id="BAzKo+Fm67wvuZ)LL+z=" x="345" y="161">
    <field name="VAR" id="VX_uNrZ+,6}^7H.KK)/|" variabletype="">
      z
    </field>
  </block>
  <block type="class_get_instance" id="VfTppMt*d3sW)fF;q:{O" x="463" y="298">
    <mutation name="Klasse" />
    <field name="INSTANCE">InstanzName</field>
    <next>
      <block type="class_instance" id="F`Ndhk_@JL.53`EJ-b6B">
        <mutation name="InstanzName" class="Klasse" />
        <field name="METHODS">Funktion</field>
      </block>
    </next>
  </block> -->
</xml>;

<script>
var workspace = Blockly.inject("blocklyDiv", { toolbox: document.getElementById("toolbox") });
Blockly.Xml.domToWorkspace(document.getElementById("startBlocks"), workspace);
</script>
<div>
  <button onclick = "run()"> Run Me</button>
  <script>
  var run = function() {
  Blockly.JavaScript.addReservedWords("code");
  var code = Blockly.JavaScript.workspaceToCode(workspace);
  console.log(code);
  try {
    eval(code);
  } catch (e) {
    alert(e);
  }
};
</script>
</div>
</body>
</html>
